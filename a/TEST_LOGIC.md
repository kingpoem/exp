# 测试逻辑说明文档

## 当前测试逻辑概述

### 1. 测试函数结构

#### `run_test()` 函数
- **功能**：执行单个测试用例并验证结果
- **测试流程**：
  1. 创建数组副本（算法会修改原数组）
  2. 打印测试信息（测试名称、原数组、查找的k值）
  3. 记录开始时间
  4. 调用 `linear_select()` 执行算法
  5. 记录结束时间，计算耗时
  6. **期望值验证**：如果提供了期望值（expected != -1），比较结果与期望值
  7. **结果验证**：对数组排序后，检查第k个位置的值是否与算法结果一致
  8. 输出测试结果和验证状态

#### `generate_random_test()` 函数
- **功能**：生成随机数组并测试多个k值
- **测试流程**：
  1. 使用指定种子生成随机数组（值范围：0-999）
  2. 测试多个k值：`{1, n/4, n/2, 3n/4, n}`
  3. 对每个k值：
     - 执行算法并计时
     - 通过排序验证结果正确性
     - 输出结果和耗时

#### `generate_special_test()` 函数（新增）
- **功能**：生成特殊分布的测试用例
- **支持的分布类型**：
  1. **大量重复元素**：只有10个不同值的数组，测试重复元素处理能力
  2. **递增序列**：已排序的递增数组
  3. **递减序列**：逆序的递减数组
  4. **双峰分布**：前半部分小值，后半部分大值，测试算法在特殊分布下的表现

## 测试用例分类

### 一、基础功能测试（测试1-9）

1. **测试1：基本数组** - 测试基本功能
2. **测试2：已排序数组** - 测试已排序数组的处理
3. **测试3：逆序数组** - 测试逆序数组的处理
4. **测试4：重复元素** - 测试包含重复元素的数组
5. **测试5：单个元素** - 边界情况测试
6. **测试6：两个元素** - 最小数组测试
7. **测试7：查找最小元素** - 查找k=1的情况
8. **测试8：查找最大元素** - 查找k=n的情况
9. **测试9：中等大小数组(50个元素)** - 中等规模测试

### 二、扩展功能测试（测试10-17，新增）

10. **测试10：全相同元素(100个)** - 所有元素相同的情况
11. **测试11：锯齿形数组(30个元素)** - 先增后减的特殊分布
12. **测试12：包含负数** - 测试负数处理
13. **测试13：大数组已排序(200个元素)** - 大规模已排序数组
14. **测试14：大数组逆序(200个元素)** - 大规模逆序数组
15. **测试15：查找中位数(100个元素)** - 查找中位数（k=n/2）
16. **测试16：查找第2小(500个元素)** - 查找接近最小值的元素
17. **测试17：查找第n-1小(500个元素)** - 查找接近最大值的元素

### 三、随机测试用例

测试不同规模的随机数组：
- 100个元素
- 500个元素
- 1000个元素
- 5000个元素
- 10000个元素
- **20000个元素（新增）**
- **50000个元素（新增）**
- **100000个元素（新增）**

每个随机测试会测试5个k值：
- k=1（最小值）
- k=n/4（第一四分位数）
- k=n/2（中位数）
- k=3n/4（第三四分位数）
- k=n（最大值）

### 四、特殊分布测试（新增）

18. **大量重复元素(1000个)** - 只有10个不同值的数组
19. **递增序列(5000个)** - 完全有序的递增数组
20. **递减序列(5000个)** - 完全有序的递减数组
21. **双峰分布(2000个)** - 前半部分小值，后半部分大值

每个特殊分布测试会测试7个k值：
- k=1, 2（边界值）
- k=n/4, n/2, 3n/4（分位数）
- k=n-1, n（边界值）

## 验证机制

### 双重验证

1. **期望值验证**（如果提供）：
   - 比较算法结果与手动计算的期望值
   - 用于验证测试用例设计是否正确

2. **结果验证**（必须）：
   - 对数组进行排序
   - 检查排序后第k个位置的值是否与算法结果一致
   - 这是最可靠的验证方法，确保算法结果正确

### 性能测试

- 每个测试都记录执行时间（毫秒）
- 可以观察算法在不同数据规模下的性能表现
- 验证算法的时间复杂度是否为O(n)

## 测试覆盖范围

### 数据规模覆盖
- 小规模：1-10个元素
- 中等规模：30-500个元素
- 大规模：1000-10000个元素
- **超大规模：20000-100000个元素（新增）**

### k值覆盖
- 边界值：k=1, k=2, k=n-1, k=n
- 分位数：k=n/4, k=n/2, k=3n/4
- 随机位置：各种k值

### 数据分布覆盖
- 随机分布
- 已排序（递增）
- 逆序（递减）
- 重复元素
- 全相同元素
- 特殊分布（锯齿形、双峰等）

## 新增测试用例说明

### 大数据量测试（20000, 50000, 100000）

这些测试主要用于：
1. **验证算法在大数据量下的正确性**
2. **验证时间复杂度**：观察执行时间是否随n线性增长
3. **压力测试**：测试算法在极端情况下的稳定性

### 特殊分布测试

这些测试用于验证算法在各种数据分布下的表现：
- **大量重复**：测试算法处理重复元素的效率
- **递增/递减**：测试算法在有序数组上的表现
- **双峰分布**：测试算法在特殊数据分布下的正确性

## 运行测试

```bash
# 编译并运行所有测试
make a

# 或者分步执行
make        # 编译
make test   # 运行测试（生成文本报告）
make report # 生成HTML报告
```

## 测试报告

- **文本报告**：`test_report.txt` - 包含所有测试的详细输出
- **HTML报告**：`test_report.html` - 可视化的测试报告，包含统计信息和图表

